DROP DATABASE tour_agency2;
CREATE DATABASE tour_agency2;
\c tour_agency2
-- WARNING: имя базы данных будет приведено к нижнему регистру.
CREATE DATABASE Tour_Agency2 ;
\c tour_agency2
SET client_encoding = 'UTF8';
CREATE SCHEMA agency;
CREATE TABLE agency.Customer
 (
    CustomerID serial NOT NULL PRIMARY KEY,
    LastName varchar(20) NOT NULL,
    FirstName varchar(20) NOT NULL,
    Patronymic varchar(20) NULL ,
    Gender char(1) NOT NULL,
CONSTRAINT ch_Gender CHECK (Gender IN ('М', 'Ж') ), 
    BirthDate date NOT NULL,
CONSTRAINT ch_BirthDate CHECK (EXTRACT (year from AGE (current_date, BirthDate))>=18),  
    Phone char(12) NOT NULL,
CONSTRAINT ch_Phone CHECK (Phone ~ '^\+\d{11}$'),
    Address varchar(100) NULL,
    Note text NULL
);
CREATE TABLE agency. Manager
 (
    ManagerID serial NOT NULL PRIMARY KEY,
    LastName varchar(20) NOT NULL,
    FirstName varchar(20) NOT NULL,
    Patronymic varchar(20) NULL ,
    Gender varchar(1) NOT NULL,
CONSTRAINT ch_Gender CHECK (Gender IN ('М', 'Ж') ), 
    BirthDate date NOT NULL,
CONSTRAINT ch_BirthDate CHECK (EXTRACT (year from AGE (current_date, BirthDate))>=18),  
    HireDate date DEFAULT current_date NOT NULL,
CONSTRAINT ch_HireDate CHECK ( HireDate > BirthDate)
);

CREATE TABLE agency.City (
    CityID serial NOT NULL primary key,
    CityName varchar(30) NOT NULL,
    Lattitude real NOT NULL,
CONSTRAINT ch_Lattitude CHECK (Lattitude>=-180 AND Lattitude<=180),
    Longitude real NOT NULL,
CONSTRAINT ch_Longitude CHECK (Longitude >=-90 AND Longitude <=90),
    Region varchar(50) NOT NULL,
    Population integer,
CONSTRAINT ch_Population CHECK (Population >0),
    Area real,
CONSTRAINT ch_Area CHECK (Area >0),
    Sights text NOT NULL
);
CREATE TABLE agency.Tour (
    TourID serial  NOT NULL primary key,
    Designation varchar(50) NOT NULL,
    Duration integer NOT NULL,
CONSTRAINT ch_Duration CHECK (Duration >0),
    Price decimal(8,2) NOT NULL,
CONSTRAINT ch_Price CHECK (Price >0)
);
CREATE TABLE agency.TourCity (
    CityID integer NOT NULL,
CONSTRAINT fk_CityID  FOREIGN KEY (CityID ) REFERENCES agency.City (CityID) ON DELETE CASCADE ON UPDATE CASCADE,
    TourID integer NOT NULL,
CONSTRAINT fk_TourID  FOREIGN KEY (TourID ) REFERENCES agency.Tour (TourID) ON DELETE NO ACTION ON UPDATE CASCADE,
  primary key(CityID, TourID)
);

CREATE TABLE agency.Ordering (
    OrderID serial NOT NULL primary key,
    Customer integer NULL,
    OrderDate date DEFAULT current_date NOT NULL,
    Manager integer NOT NULL,
    Tour integer NOT NULL,
    DepartureDate date NOT NULL,
CONSTRAINT ch_OrderDate CHECK (DepartureDate >=OrderDate),
    Quantity integer DEFAULT 1 NOT NULL,
CONSTRAINT ch_Quantity CHECK (Quantity > 0),
    Note text,
CONSTRAINT fk_Customer  FOREIGN KEY (Customer ) REFERENCES agency.Customer (CustomerID) ON DELETE SET NULL ON UPDATE CASCADE,
CONSTRAINT fk_Manager FOREIGN KEY (Manager) REFERENCES agency.Manager (ManagerID) ON DELETE SET NULL ON UPDATE CASCADE,
CONSTRAINT fk_Tour FOREIGN KEY (Tour) REFERENCES agency.Tour (TourID) 
ON DELETE NO ACTION ON UPDATE CASCADE
);

INSERT INTO agency.city (cityid, cityname, lattitude, longitude, region, population, area, sights) VALUES (1, 'Барнаул', 83.76, 53.36, 'Алтайский край', 625679, 321, 'Изумрудный, Арлекино, нагорный парк'), (2, 'Бийск', 85.21, 52.54, 'Алтайский край', 206327, 291.7, 'Бийский драматический театр, Успенский собор, Бийский краеведческий музей'), (3, 'Владивосток', 131.87, 43.11, 'Приморский край', 598927, 331.2, 'Владивостокская крепость, Собор Покрова Пресвятой Богородицы, Военно-исторический музей флота'), (4, 'Владикавказ', 44.67, 43.04, 'Республика Северная Осетия', 309173, 291.6, 'Мемориал Славы, Проспект Мира, Русский театр'), (5, 'Владимир', 40.4, 56.14, 'Владимирская область', 346922, 124.6, 'Золотые ворота, Дмитриевский собор, Исторический музей'), (6, 'Волгоград', 44.67, 48.72, 'Волгоградская область', 1008000, 859.4, 'Родина-мать зовет!, Площадь Павших Борцов, Мельница Гергардта'), (7, 'Вологда', 39.88, 59.22, 'Вологодская область', 305397, 116, 'Вологодский Кремль, Софийский собор, Дом Петра I'), (8, 'Екатеринбург', 60.61, 56.85, 'Свердловская область', 1387000, 1112, 'Храм-на-Крови, Ганина яма, Екатеринбургский зоопарк'), (9, 'Иваново', 40.97, 56.59, 'Ивановская область', 408952, 104.8, 'Музей ивановского ситца, Щудровская палатка, Введенский женский монастырь'), (10, 'Ижевск', 53.2, 56.84, 'Удмуртская Республика', 631182, 316.6, 'Лудорвай, Чекерил, Ижевский пруд'), (11, 'Иркутск', 104.3, 52.3, 'Иркутская область', 601993, 280, 'Казанская церковь, Нижняя набережная Ангары, Музей городского быта'), (12, 'Йошкар-Ола', 47.53, 56.37, 'Республика Марий Эл', 279100, 101.8, 'Царевококшайский Кремль, Национальная художественная галерея, Республиканский театр кукол'), (13, 'Казань', 49.12, 55.79, 'Республика Татарстан', 1308660, 515.8, 'Казанский  Кремль, Мечеть Кул Шариф, Кремлевская набережная'), (14, 'Калининград', 20.51, 54.71, 'Калининградская область', 437456, 223, 'Музей янтаря, Кафедральный собор, Музей Мирового океана'), (15, 'Калуга', 36.28, 54.53, 'Калужская область', 328871, 168.8, 'Калуга Парк, Березуйский овраг, Церковь Космы и Дамиана'), (16, 'Киров', 49.66, 58.6, 'Кировския область', 457383, 169.7, 'Александровский сад, Александровский костел, Вятский художественный музей'), (17, 'Кострома', 40.93, 57.77, 'Костромская область', 270366, 144.5, 'Красные ряды, Пожарная каланча, Беседка Островского'), (18, 'Краснодар', 38.98, 45.04, 'Краснодарский край', 773970, 339.3, 'Парк Краснодар, Парк Галицкого, Мост Поцелуев'), (19, 'Кунгур', 56.96, 57.44, 'Пермский край', 64259, 68.7, 'Кунгурская ледяная пещера, Пуп земли, Музей истории купечества'), (20, 'Махачкала', 47.5, 42.98, 'Республика Дагестан', 575243, 468.13, 'Центральная Джума-мечеть, Памятник Разулу Гамзатову, Памятник Русской учительницы'), (21, 'Москва', 37.62, 55.75, 'Московская область', 10381999, 2511, 'Красная площадь, Большой театр, Храм Василия Блаженного'), (22, 'Муром', 42.04, 55.58, 'Владимирская область', 113330, 43.78, 'Свято-Троицкий женский монастырь, Николо-Набережная церковь, Окский парк'), (23, 'Нальчик', 43.62, 43.5, 'Кабардино-Балкарская республика', 239230, 67, 'Нальчикский ипподром, Сосруко, Атажукинский Сад'), (24, 'Нижний Новгород', 44, 56.33, 'Нижегородская область', 1252000, 460, 'Нижегородский Кремль, Чкаловсвкая лестница, Рождественская церковь'), (25, 'Нижний Тагил', 59.97, 57.92, 'Свердловская область', 358651, 297.5, 'Лисья гора, Историко-краеведческий музей, Музей Демидовская дача'), (26, 'Омск', 73.37, 55, 'Омская область', 1159000, 573, 'Омская крепость, Омский музей изобразительных искусств, Зеленый остров'), (27, 'Орел', 36.08, 52.97, 'Орловская область', 318642, 121.2, 'Музей Тургенева, Сквер Гуртьева, Орловский краеведческий музей'), (28, 'Оренбург', 55.06, 51.77, 'Оренбургская область', 555420, 258.6, 'Парк Тополя, Аквапарк Лимпопо, Елизаветинские ворота'), (29, 'Пенза', 45, 53.2, 'Пензенская область', 519948, 304.2, 'Пензенский зоопарк, Музей народного творчества, Памятник Первопоселенец'), (30, 'Переславль-Залесский', 38.85, 56.73, 'Ярославская область', 37391, 44949, 'Спасо-Преображенский собор, Музей Утюга, Дом Берендея'), (31, 'Пермь', 56.25, 58.01, 'Пермский край', 1049199, 803, 'Дом Грибушина, Пермский государственный художественный музей, Пермяк-соленый уши'), (32, 'Псков', 28.35, 57.81, 'Псковская область', 205062, 95, 'Псковский Кром, Псковский Кремль, Свято-Троицкий кафедральный собор'), (33, 'Пятигорск', 43.06, 44.05, 'Ставропольский край', 144603, 97, 'Парк Цветник, Место дуэли Лермонтова, Эолова арфа'), (34, 'Ростов Великий', 39.25, 57.11, 'Ярославская область', 30943, 32, 'Спасо-Яковлевский монастырь, Митрополичий сад, Музей Царевны-лягушки'), (35, 'Рязань', 39.69, 54.62, 'Рязанская область', 526919, 224.2, 'Рязанский Кремль, Успенский собор, Соборная площадь'), (36, 'Самара', 50.15, 53.2, 'Самарская область', 1173393, 541.4, 'Иверский женский монастырь, Площадь Славы, Бункер Сталина'), (37, 'Санкт-Петербург', 30.31, 59.94, 'Ленинградская область', 5601911, 1439, 'Исаакиевский собор, Храм Спаса на Крови, Эрмитаж'), (38, 'Сергиев посад', 38.13, 56.3, 'Московская область', 109076, 50.4, 'Черниговский скит, Скитские пруды, Свято-Троицкая Сергиева лавра'), (39, 'Сочи', 39.73, 43.35, 'Краснодарский край', 364171, 176.8, 'Ахун, Агурские водопады, Олимпийский парк'), (40, 'Суздаль', 40.45, 56.42, 'Владимирская область', 9286, 15, 'Суздальский Кремль, Рождественский собор, Покровский собор'), (41, 'Тверь', 35.9, 56.86, 'Тверская область', 407896, 152.2, 'Городской сад, Музей козла, Памятник Михаилу Кругу'), (42, 'Тольятти', 49.35, 53.53, 'Самарская область', 719363, 314.8, 'Спасо-Преображенский собор, Парк Победы, Тольяттинский краеведческий музей'), (43, 'Томск', 84.97, 56.5, 'Томская область', 543596, 297.2, 'Музей истории Томска, Городской сад, Лагерный сад'), (44, 'Тула', 37.62, 54.2, 'Тульская область', 496656, 145, 'Ясная Поляна, Тульский Кремль, Музей самоваров'), (45, 'Тюмень', 65.54, 57.15, 'Тюменская область', 621918, 698.5, 'Мост Влюбленных, Цветной бульвар, Сквер Сибирских кошек'), (46, 'Уфа', 56, 54.74, 'Республика Башкортастан', 1075000, 707.9, 'Ляля-Тюльпан, Парк Кашкадан, Памятник Салавату Юлаеву'), (47, 'Чебоксары', 47.25, 56.13, 'Чувашская Республика', 495810, 251, 'Парк Победы, Введенский собор, Чувашский национальный музей'), (48, 'Челябинск', 61.43, 55.15, 'Челябинская область', 1115000, 530, 'Челябинский зоопарк, Озеро Смолино, Парк Алое Поле'), (49, 'Элиста', 44.26, 46.31, 'Республика Калмыкия', 104177, 92.36, 'Ступа Просветления, Пагода семи дней, Золотые ворота'), (50, 'Ярославль', 39.87, 57.63, 'Ярославская область', 591161, 205, 'Толгский монастырь, Ярославский музей-заповедник, Храм Ильи Пророка');

INSERT INTO agency.tour (tourid, designation, duration, price) VALUES (1, 'Самара', 2, 8900.00),(2, 'Таинственный Алтай', 5, 27500.00),(3, 'Сказочный Урал', 5, 23500.00),(4, 'Золотое кольцо', 4, 14000.00),(5, 'Величественный Байкал', 8, 53000.00),(6, 'Загадочный Кавказ', 9, 48000.00),(7, 'Нижний Новгород', 2, 4000.00),(8, 'По древним русским городам', 3, 9500.00),(9, 'Кунгурские пещеры', 2, 8500.00),(10, 'Дагестан', 7, 42000.00),(11, 'Вологда', 2, 4500.00),(12, 'Казань', 3, 9800.00),(13, 'Гастрономический тур', 2, 7800.00),(14, 'Санкт-Петербург', 5, 18000.00),(15, 'Сердце Пармы (Пермский край)', 1, 5600.00);

INSERT INTO agency.customer (customerid, lastname, firstname, patronymic, gender, birthdate, phone, address, note) VALUES (202232, 'Акимов', 'Матвей', 'Кириллович', 'М', '1956-08-09', '+79619891305', NULL, NULL), (202221, 'Кузнецов', 'Богдан', 'Тимофеевич', 'М', '1998-05-07', '+79616871133', 'Киров, Московская 56-185', NULL), (202103, 'Осипова', 'Ольга', 'Артёмовна', 'Ж', '1985-03-14', '+79532344249', 'Киров, Ореховая 6-15', NULL), (202111, 'Моисеева', 'Милана', 'Глебовна', 'Ж', '1982-02-15', '+79536821339', 'Москва, Ленина 556-315', NULL), (202011, 'Кравцова', 'София', 'Матвеевна', 'Ж', '1998-01-01', '+79191265271', NULL, 'Предпочитаю номер с окнами во двор'), (202127, 'Макарова', 'Софья', 'Михайловна', 'Ж', '1963-03-26', '+79014284805', NULL, 'Позвоните мне, если набралась маленькая группа'), (202208, 'Алексеев', 'Тимур', 'Матвеевич', 'М', '1958-03-13', '+79016004101', NULL, NULL), (202201, 'Андреев', 'Сергей', 'Святославович', 'М', '1960-10-25', '+79019550380', NULL, NULL), (202120, 'Андреева', 'Кира', 'Львовна', 'Ж', '1964-01-08', '+79011235415', NULL, NULL), (202239, 'Аникина', 'Юлия', 'Михайловна', 'Ж', '1965-05-27', '+79612589135', NULL, NULL), (202022, 'Антонова', 'Алиса', 'Артёмовна', 'Ж', '1966-07-25', '+79533809941', NULL, NULL), (202225, 'Антонова', 'Милана', 'Ильинична', 'Ж', '1967-04-04', '+79611272611', NULL, NULL), (202234, 'Балашов', 'Лев', 'Алексеевич', 'М', '1967-06-05', '+79618645084', NULL, NULL), (202014, 'Беспалова', 'Ирина', 'Марковна', 'Ж', '1967-11-27', '+79196557114', NULL, NULL), (202010, 'Бондарева', 'Милана', 'Эмировна', 'Ж', '1969-07-30', '+79193892156', NULL, NULL), (202203, 'Васильева', 'Екатерина', 'Михайловна', 'Ж', '1970-06-12', '+79014730641', NULL, NULL), (202207, 'Виноградов', 'Богдан', 'Максимович', 'М', '1974-08-29', '+79014280707', NULL, NULL), (202003, 'Виноградов', 'Николай', 'Владимирович', 'М', '1979-01-30', '+79194393373', NULL, NULL), (202020, 'Волков', 'Степан', 'Артурович', 'М', '1979-03-06', '+79195203063', NULL, NULL), (202220, 'Воронина', 'Полина', 'Александровна', 'Ж', '1982-03-26', '+79611119709', NULL, NULL), (202218, 'Галкин', 'Алексей', 'Глебович', 'М', '1983-05-03', '+79617225427', NULL, NULL), (202228, 'Герасимова', 'Арина', 'Алиевна', 'Ж', '1985-05-30', '+79613903250', NULL, NULL), (202119, 'Герасимова', 'Ева', 'Данииловна', 'Ж', '1986-02-11', '+79017631558', NULL, NULL), (202244, 'Горюнов', 'Никита', 'Глебович', 'М', '1986-10-29', '+79615623008', NULL, NULL), (202241, 'Гусев', 'Фёдор', 'Маркович', 'М', '1986-12-19', '+79618715209', NULL, NULL), (202216, 'Давыдова', 'Алиса', 'Степановна', 'Ж', '1989-01-30', '+79016275861', NULL, NULL), (202205, 'Денисов', 'Степан', 'Тихонович', 'М', '1997-09-10', '+79016579470', NULL, NULL), (202008, 'Дубов', 'Денис', 'Тимофеевич', 'М', '2000-08-31', '+79199599706', NULL, NULL), (202012, 'Егоров', 'Матвей', 'Ярославович', 'М', '2001-03-06', '+79192110185', NULL, NULL), (202212, 'Егоров', 'Павел', 'Дамирович', 'М', '2004-12-15', '+79019840959', NULL, NULL), (202230, 'Елисеев', 'Марсель', 'Максимович', 'М', '1956-05-29', '+79613720743', NULL, NULL), (202131, 'Ерофеев', 'Павел', 'Иванович', 'М', '1956-08-29', '+79015424581', NULL, NULL), (202132, 'Жукова', 'Диана', 'Артёмовна', 'Ж', '1962-11-28', '+79010146118', NULL, NULL), (202114, 'Журавлев', 'Сергей', 'Кириллович', 'М', '1963-01-01', '+79535433172', NULL, NULL), (202019, 'Захаров', 'Артём', 'Максимович', 'М', '1963-11-29', '+79191660641', NULL, NULL), (202113, 'Захарова', 'Ольга', 'Александровна', 'Ж', '1970-07-06', '+79539162453', NULL, NULL), (202005, 'Зубков', 'Александр', 'Денисович', 'М', '1970-09-11', '+79198970368', NULL, NULL), (202124, 'Иванов', 'Семён', 'Ильич', 'М', '1975-02-20', '+79018572629', NULL, NULL), (202235, 'Иванова', 'Алиса', 'Кирилловна', 'Ж', '1979-12-27', '+79616789755', NULL, NULL), (202021, 'Иванова', 'Анастасия', 'Глебовна', 'Ж', '1980-01-08', '+79533887190', NULL, NULL), (202007, 'Иванова', 'Ева', 'Михайловна', 'Ж', '1980-06-04', '+79195569390', NULL, NULL), (202122, 'Иванова', 'Яна', 'Александровна', 'Ж', '1981-10-22', '+79019800830', NULL, NULL), (202204, 'Игнатов', 'Фёдор', 'Александрович', 'М', '1982-06-22', '+79015627710', NULL, NULL), (202226, 'Кожевников', 'Иван', 'Вячеславович', 'М', '1982-07-14', '+79617516701', NULL, NULL), (202217, 'Козина', 'Милана', 'Леонидовна', 'Ж', '1983-06-03', '+79612688425', NULL, NULL), (202101, 'Козлова', 'Софья', 'Михайловна', 'Ж', '1988-04-01', '+79534816913', NULL, NULL), (202002, 'Коновалов', 'Иван', 'Матвеевич', 'М', '1990-07-04', '+79194708106', NULL, NULL), (202211, 'Коротков', 'Глеб', 'Петрович', 'М', '1991-09-27', '+79017305388', NULL, NULL), (202219, 'Котова', 'Анна', 'Тимофеевна', 'Ж', '1994-08-22', '+79616323607', NULL, NULL), (202115, 'Кравцова', 'Алина', 'Михайловна', 'Ж', '1996-12-26', '+79536490798', NULL, NULL), (202109, 'Кудрявцева', 'Ксения', 'Данииловна', 'Ж', '1998-05-01', '+79537364338', NULL, NULL), (202236, 'Кузнецова', 'Таисия', 'Ивановна', 'Ж', '2004-02-06', '+79614588549', NULL, NULL), (202231, 'Лебедева', 'Вероника', 'Марковна', 'Ж', '1956-05-25', '+79615822297', NULL, NULL), (202242, 'Литвинов', 'Николай', 'Дмитриевич', 'М', '1958-10-31', '+79615947417', NULL, NULL), (202240, 'Львова', 'София', 'Александровна', 'Ж', '1960-12-21', '+79619434837', NULL, NULL), (202237, 'Максимова', 'Милана', 'Романовна', 'Ж', '1964-05-25', '+79616506649', NULL, NULL), (202215, 'Мартынов', 'Адам', 'Ильич', 'М', '1964-06-23', '+79014888778', NULL, NULL), (202018, 'Мельников', 'Лев', 'Арсентьевич', 'М', '1972-06-28', '+79194545698', NULL, NULL), (202016, 'Мельникова', 'Дарья', 'Тимофеевна', 'Ж', '1972-12-18', '+79191013875', NULL, NULL), (202107, 'Мещерякова', 'Александра', 'Данииловна', 'М', '1976-08-16', '+79530043440', NULL, NULL), (202112, 'Миронова', 'Ева', 'Михайловна', 'Ж', '1976-12-09', '+79539074454', NULL, NULL), (202128, 'Митрофанов', 'Даниил', 'Александрович', 'М', '1980-01-03', '+79016292596', NULL, NULL), (202213, 'Никитина', 'Дарья', 'Лукинична', 'Ж', '1983-06-10', '+79014761636', NULL, NULL), (202015, 'Овчинников', 'Михаил', 'Вадимович', 'М', '1984-03-09', '+79193186908', NULL, NULL), (202121, 'Окулова', 'Амина', 'Тихоновна', 'Ж', '1985-01-18', '+79017417890', NULL, NULL), (202206, 'Павлов', 'Дмитрий', 'Сергеевич', 'М', '1985-04-29', '+79017420369', NULL, NULL), (202222, 'Павлов', 'Иван', 'Миронович', 'М', '1986-08-19', '+79615549818', NULL, NULL), (202006, 'Павлова', 'Ирина', 'Алиевна', 'Ж', '1991-06-06', '+79193865926', NULL, NULL), (202238, 'Пантелеев', 'Максим', 'Михайлович', 'М', '1997-02-28', '+79610491247', NULL, NULL), (202227, 'Пантелеева', 'Елизавета', 'Андреевна', 'Ж', '1998-01-23', '+79611053736', NULL, NULL), (202118, 'Панфилов', 'Филипп', 'Викторович', 'М', '2001-05-08', '+79531683401', NULL, NULL), (202104, 'Петрова', 'Анастасия', 'Матвеевна', 'Ж', '2001-08-29', '+79533063472', NULL, NULL), (202116, 'Кузнецов', 'Максим', 'Тимофеевич', 'М', '2001-05-08', '+79530515167', NULL, 'Хочу много пешеходных экскурсий'), (202125, 'Петухов', 'Герман', 'Александрович', 'М', '2005-01-12', '+79016115029', NULL, NULL), (202130, 'Пугачева', 'Полина', 'Лукинична', 'Ж', '2005-02-09', '+79018382436', NULL, NULL), (202129, 'Родионов', 'Адам', 'Тимофеевич', 'М', '1957-09-23', '+79011872072', NULL, NULL), (202243, 'Романова', 'София', 'Макаровна', 'Ж', '1958-08-27', '+79616567913', NULL, NULL), (202224, 'Румянцев', 'Борис', 'Елисеевич', 'М', '1962-12-11', '+79618935924', NULL, NULL), (202009, 'Самойлова', 'Софья', 'Кирилловна', 'Ж', '1964-07-31', '+79190363051', NULL, NULL), (202123, 'Сафонова', 'Дарья', 'Игоревна', 'Ж', '1966-07-12', '+79019374961', NULL, NULL), (202004, 'Серебряков', 'Даниил', 'Сергеевич', 'М', '1970-11-09', '+79193942921', NULL, NULL), (202001, 'Сидоров', 'Егор', 'Глебович', 'М', '1971-07-21', '+79196571238', NULL, NULL), (202126, 'Ситникова', 'Алёна', 'Даниэльевна', 'Ж', '1971-12-29', '+79010008414', NULL, NULL), (202106, 'Смирнов', 'Пётр', 'Денисович', 'М', '1972-10-10', '+79537229776', NULL, NULL), (202117, 'Смирнова', 'Светлана', 'Михайловна', 'Ж', '1973-02-20', '+79538432972', NULL, NULL), (202108, 'Соколов', 'Артём', 'Никитич', 'М', '1974-07-15', '+79534619438', NULL, NULL), (202202, 'Соколов', 'Дамир', 'Даниилович', 'М', '1978-02-09', '+79011935394', NULL, NULL), (202246, 'Сорокин', 'Артём', 'Александрович', 'М', '1979-06-07', '+79614739806', NULL, NULL), (202229, 'Спиридонова', 'Стефания', 'Владимировна', 'Ж', '1981-02-16', '+79617763975', NULL, NULL), (202210, 'Столярова', 'Елизавета', 'Артёмовна', 'Ж', '1982-06-16', '+79013856545', NULL, NULL), (202233, 'Тарасова', 'София', 'Алексеевна', 'Ж', '1982-06-29', '+79617257013', NULL, NULL), (202214, 'Тимофеева', 'Алиса', 'Ярославовна', 'Ж', '1984-11-01', '+79011167617', NULL, NULL), (202017, 'Титов', 'Руслан', 'Николаевич', 'М', '1985-10-25', '+79190128080', NULL, NULL), (202013, 'Успенский', 'Иван', 'Германович', 'М', '1990-08-01', '+79191262886', NULL, NULL), (202209, 'Федорова', 'Анна', 'Ильинична', 'Ж', '1994-03-15', '+79016980786', NULL, NULL), (202223, 'Федорова', 'Виктория', 'Владимировна', 'Ж', '1994-12-29', '+79615192168', NULL, NULL), (202245, 'Федорова', 'Наталья', 'Артёмовна', 'Ж', '1996-09-10', '+79618940043', NULL, NULL), (202105, 'Шаповалов', 'Артём', 'Макарович', 'М', '1997-12-26', '+79536455696', NULL, NULL), (202110, 'Яковлева', 'Мила', 'Артёмовна', 'Ж', '1998-02-17', '+79535003763', NULL, NULL), (202102, 'Яковлева', 'Полина', 'Сергеевна', 'Ж', '1999-07-27', '+79538867245', NULL, NULL);

INSERT INTO agency.manager (managerid, lastname, firstname, patronymic, gender, birthdate, hiredate) VALUES (3, 'Лобурец', 'Диана', 'Борисовна', 'Ж', '1980-12-13', '2018-07-15'), (4, 'Алеев', 'Леонид', 'Иванович', 'М', '2000-12-01', '2022-05-21'), (5, 'Левитин', 'Евгений', 'Валерьянович', 'М', '1970-04-02', '1998-05-02'), (6, 'Богуславская', 'Дарья', 'Вячеславовна', 'Ж', '2000-03-19', '2021-05-15'), (7, 'Иванов', 'Александр', 'Геннадиевич', 'М', '1992-11-28', '2017-12-11'), (1, 'Потрнов', 'Арсений', 'Иванович', 'М', '1980-12-01', '2020-01-10'), (2, 'Аксенова', 'Виталина', 'Петровна', 'М', '1983-10-11', '2021-03-10');

INSERT INTO agency.ordering (orderid, customer, orderdate, manager, tour, departuredate, quantity, note) VALUES (103, 202232, '2022-11-26', 6, 12, '2022-12-01', 1, NULL),(79, 202208, '2022-06-19', 6, 6, '2022-06-24', 3, NULL),(72, 202201, '2021-10-15', 7, 11, '2021-11-06', 2, NULL),(52, 202120, '2021-09-02', 2, 4, '2021-09-06', 2, NULL),(110, 202239, '2022-02-15', 7, 3, '2022-03-06', 2, NULL),(22, 202022, '2020-12-05', 4, 9, '2020-12-08', 2, NULL),(96, 202225, '2022-01-18', 6, 7, '2022-01-30', 2, NULL),(105, 202234, '2021-09-02', 7, 4, '2021-09-06', 2, NULL),(14, 202014, '2020-02-25', 7, 4, '2020-03-18', 3, NULL),(68, 202010, '2022-02-10', 7, 10, '2022-02-13', 2, NULL),(32, 202010, '2020-03-22', 5, 11, '2020-03-30', 2, NULL),(10, 202010, '2020-03-18', 5, 14, '2020-04-15', 3, NULL),(74, 202203, '2021-10-15', 4, 11, '2021-11-06', 1, NULL),(78, 202207, '2022-03-29', 5, 14, '2022-04-05', 1, NULL),(25, 202003, '2020-08-25', 4, 13, '2020-09-18', 1, NULL),(3, 202003, '2020-01-18', 5, 1, '2020-02-02', 1, NULL),(122, 202003, '2022-02-19', 3, 2, '2022-02-22', 1, NULL),(20, 202020, '2020-07-21', 5, 15, '2020-08-10', 2, NULL),(91, 202220, '2022-06-15', 5, 8, '2022-07-04', 1, NULL),(89, 202218, '2021-10-20', 3, 11, '2021-11-06', 3, NULL),(99, 202228, '2022-02-03', 3, 2, '2022-02-22', 2, NULL),(51, 202119, '2020-03-01', 7, 4, '2020-03-18', 3, NULL),(115, 202244, '2022-08-13', 4, 6, '2022-08-24', 2, NULL),(112, 202241, '2020-11-26', 6, 9, '2020-12-08', 3, NULL),(87, 202216, '2022-07-12', 7, 15, '2022-08-10', 1, NULL),(76, 202205, '2022-04-03', 6, 14, '2022-04-05', 3, NULL),(8, 202008, '2020-03-07', 1, 6, '2020-03-20', 2, NULL),(66, 202008, '2022-01-17', 2, 10, '2022-02-13', 3, NULL),(128, 202008, '2022-06-18', 2, 6, '2022-06-24', 1, NULL),(30, 202008, '2021-03-08', 5, 15, '2021-03-16', 1, NULL),(70, 202012, '2022-02-18', 7, 2, '2022-02-22', 3, NULL),(129, 202012, '2022-02-12', 7, 2, '2022-02-22', 1, NULL),(12, 202012, '2020-03-23', 2, 14, '2020-04-15', 1, NULL),(83, 202212, '2022-06-18', 2, 6, '2022-06-24', 3, NULL),(101, 202230, '2021-10-24', 6, 11, '2021-11-06', 1, NULL),(63, 202131, '2021-08-10', 7, 8, '2021-08-16', 1, NULL),(64, 202132, '2020-03-01', 2, 4, '2020-03-18', 2, NULL),(46, 202114, '2021-02-09', 5, 7, '2021-02-17', 2, NULL),(19, 202019, '2020-03-05', 6, 6, '2020-03-20', 3, NULL),(45, 202113, '2020-05-06', 3, 2, '2020-05-21', 1, NULL),(27, 202005, '2020-01-12', 1, 1, '2020-02-02', 2, NULL),(5, 202005, '2020-01-11', 1, 3, '2020-01-21', 3, NULL),(123, 202005, '2022-01-17', 2, 7, '2022-01-30', 3, NULL),(56, 202124, '2022-11-20', 1, 12, '2022-12-01', 1, NULL),(106, 202235, '2022-06-14', 1, 10, '2022-06-28', 1, NULL),(21, 202021, '2020-03-18', 2, 11, '2020-03-30', 3, NULL),(29, 202007, '2020-01-16', 4, 7, '2020-01-17', 2, NULL),(7, 202007, '2021-07-28', 4, 8, '2021-08-07', 3, NULL),(65, 202007, '2022-02-05', 1, 10, '2022-02-13', 3, NULL),(127, 202122, '2020-07-12', 6, 15, '2020-08-10', 2, NULL),(54, 202122, '2021-09-01', 2, 4, '2021-09-06', 1, NULL),(75, 202204, '2022-06-14', 6, 6, '2022-06-24', 2, NULL),(97, 202226, '2020-09-12', 3, 13, '2020-09-18', 1, NULL),(88, 202217, '2022-07-18', 7, 1, '2022-08-08', 2, NULL),(33, 202101, '2021-03-01', 6, 15, '2021-03-16', 1, NULL),(24, 202002, '2022-06-01', 7, 10, '2022-06-28', 1, NULL),(2, 202002, '2020-01-16', 7, 7, '2020-01-17', 2, NULL),(82, 202211, '2022-06-14', 6, 6, '2022-06-24', 2, NULL),(90, 202219, '2022-07-16', 6, 15, '2022-08-10', 1, NULL),(47, 202115, '2020-03-12', 7, 6, '2020-03-20', 3, NULL),(69, 202011, '2021-05-22', 1, 3, '2021-06-16', 2, NULL),(11, 202011, '2020-03-22', 3, 5, '2020-03-26', 3, NULL),(41, 202109, '2021-05-20', 2, 3, '2021-06-16', 1, NULL),(92, 202221, '2022-07-17', 5, 15, '2022-08-10', 1, NULL),(48, 202116, '2020-05-01', 4, 2, '2020-05-21', 3, NULL),(107, 202236, '2022-06-01', 7, 10, '2022-06-28', 1, NULL),(130, 202231, '2020-07-15', 6, 15, '2020-08-10', 2, NULL),(102, 202231, '2020-03-11', 5, 5, '2020-03-26', 2, NULL),(113, 202242, '2020-07-21', 6, 15, '2020-08-10', 3, NULL),(111, 202240, '2022-02-11', 4, 2, '2022-02-22', 3, NULL),(59, 202127, '2022-02-11', 7, 10, '2022-02-13', 2, NULL),(108, 202237, '2022-06-19', 5, 8, '2022-07-04', 2, NULL),(86, 202215, '2022-02-22', 7, 3, '2022-03-06', 3, NULL),(18, 202018, '2022-06-14', 7, 10, '2022-06-28', 1, NULL),(16, 202016, '2020-01-15', 6, 3, '2020-01-21', 1, NULL),(39, 202107, '2021-03-08', 4, 15, '2021-03-16', 3, NULL),(44, 202112, '2020-11-03', 5, 9, '2020-12-08', 3, NULL),(60, 202128, '2020-08-26', 2, 13, '2020-09-18', 1, NULL),(43, 202111, '2021-02-03', 4, 5, '2021-02-27', 2, NULL),(125, 202111, '2020-03-18', 7, 6, '2020-03-20', 3, NULL),(121, 202111, '2022-11-21', 5, 12, '2022-12-01', 2, NULL),(84, 202213, '2022-06-19', 6, 6, '2022-06-24', 3, NULL),(15, 202015, '2020-03-23', 7, 5, '2020-03-26', 3, NULL),(53, 202121, '2021-10-13', 1, 11, '2021-11-06', 2, NULL),(35, 202103, '2021-02-03', 2, 5, '2021-02-27', 3, NULL),(77, 202206, '2022-04-02', 4, 14, '2022-04-05', 1, NULL),(93, 202222, '2022-06-06', 2, 10, '2022-06-28', 3, NULL),(28, 202006, '2020-03-19', 1, 14, '2020-04-15', 2, NULL),(6, 202006, '2020-02-24', 7, 4, '2020-03-18', 2, NULL),(109, 202238, '2022-06-20', 7, 8, '2022-07-04', 1, NULL),(98, 202227, '2021-09-01', 1, 4, '2021-09-06', 1, NULL),(50, 202118, '2021-08-10', 7, 8, '2021-08-16', 3, NULL),(126, 202118, '2022-02-12', 7, 2, '2022-02-22', 3, NULL),(36, 202104, '2021-02-07', 6, 7, '2021-02-17', 1, NULL),(57, 202125, '2020-11-22', 4, 9, '2020-12-08', 3, NULL),(62, 202130, '2021-07-26', 7, 8, '2021-08-07', 2, NULL),(61, 202129, '2020-05-15', 2, 2, '2020-05-21', 1, NULL),(114, 202243, '2020-08-25', 7, 13, '2020-09-18', 2, NULL),(95, 202224, '2020-03-10', 5, 5, '2020-03-26', 1, NULL),(31, 202009, '2020-03-23', 6, 14, '2020-04-15', 2, NULL),(67, 202009, '2022-02-07', 1, 3, '2022-03-06', 3, NULL),(9, 202009, '2020-03-16', 5, 11, '2020-03-30', 1, NULL),(124, 202009, '2020-08-29', 3, 13, '2020-09-18', 1, NULL),(55, 202123, '2022-07-15', 2, 1, '2022-08-08', 1, NULL),(4, 202004, '2020-01-10', 6, 1, '2020-02-02', 1, NULL),(26, 202004, '2020-02-28', 5, 4, '2020-03-18', 1, NULL),(1, 202001, '2020-01-10', 1, 3, '2020-01-21', 1, NULL),(23, 202001, '2020-07-22', 7, 15, '2020-08-10', 3, NULL),(58, 202126, '2021-02-01', 6, 7, '2021-02-17', 3, NULL),(119, 202106, '2021-09-06', 1, 4, '2021-09-14', 2, NULL),(38, 202106, '2021-03-07', 2, 15, '2021-03-16', 1, NULL),(49, 202117, '2021-07-26', 2, 8, '2021-08-07', 1, NULL),(40, 202108, '2021-07-20', 6, 8, '2021-08-07', 3, NULL),(73, 202202, '2020-09-10', 7, 13, '2020-09-18', 2, NULL),(117, 202246, '2022-03-29', 6, 14, '2022-04-05', 3, NULL),(100, 202229, '2022-02-01', 7, 2, '2022-02-22', 2, NULL),(81, 202210, '2022-01-22', 5, 7, '2022-01-30', 2, NULL),(104, 202233, '2021-10-26', 4, 11, '2021-11-06', 3, NULL),(85, 202214, '2022-07-11', 3, 15, '2022-08-10', 1, NULL),(17, 202017, '2020-05-05', 2, 2, '2020-05-21', 1, NULL),(71, 202013, '2020-11-22', 5, 9, '2020-12-08', 3, NULL),(13, 202013, '2020-12-03', 3, 9, '2020-12-08', 1, NULL),(80, 202209, '2022-02-18', 5, 2, '2022-02-22', 1, NULL),(94, 202223, '2022-07-22', 5, 15, '2022-08-10', 1, NULL),(116, 202245, '2022-08-16', 6, 6, '2022-08-24', 3, NULL),(37, 202105, '2021-02-19', 6, 5, '2021-02-27', 3, NULL),(42, 202110, '2020-03-16', 6, 11, '2020-03-30', 1, NULL),(120, 202110, '2022-07-22', 5, 1, '2022-08-08', 1, NULL),(118, 202102, '2021-10-22', 4, 11, '2021-11-06', 2, NULL),(34, 202102, '2020-03-22', 1, 11, '2020-03-30', 3, NULL);

INSERT INTO agency.tourcity (cityid, tourid) VALUES (12, 1), (47, 1), (42, 1), (36, 1), (1, 2), (2, 2), (19, 3), (25, 3), (38, 4), (30, 4), (34, 4), (50, 4), (17, 4), (9, 4), (5, 4), (40, 4), (12, 6), (47, 6), (49, 6), (4, 6), (23, 6), (33, 6), (24, 7), (24, 8), (7, 8), (7, 11), (12, 12), (13, 12), (47, 13), (12, 13), (37, 14);

set statement_timeout = 10000
